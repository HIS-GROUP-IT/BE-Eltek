{"version":3,"sources":["../../../src/models/leave/leave.model.ts"],"sourcesContent":["import { Model, DataTypes, Optional } from 'sequelize';\r\nimport sequelize from '@/database/index'; \r\nimport Employee from '@/models/employee/employee.model'; \r\nimport { ILeave, LeaveStatus, LeaveType } from '@/types/leave.types';\r\n\r\n\r\ninterface LeaveCreationAttributes extends Optional<ILeave, 'id' | 'status' | 'createdAt' | 'updatedAt'> {}\r\n\r\nclass Leave extends Model<ILeave, LeaveCreationAttributes> implements ILeave {\r\n  public id!: number;\r\n  public leaveType!: LeaveType;\r\n  public duration!: number;\r\n  public startDate!: Date;\r\n  public endDate!: Date;\r\n  public reason!: string;\r\n  public documents!: string[];\r\n  public status!: LeaveStatus;\r\n  public employeeId!: number;\r\n  public readonly createdAt!: Date;\r\n  public readonly updatedAt!: Date;\r\n}\r\n\r\nLeave.init(\r\n  {\r\n    id: {\r\n      type: DataTypes.INTEGER,\r\n      autoIncrement: true,\r\n      primaryKey: true\r\n    },\r\n    leaveType: {\r\n      type: DataTypes.ENUM(...Object.values(LeaveType)),\r\n      allowNull: false\r\n    },\r\n    duration: {\r\n      type: DataTypes.DECIMAL(5, 1), \r\n      allowNull: false\r\n    },\r\n    startDate: {\r\n      type: DataTypes.DATEONLY,\r\n      allowNull: false\r\n    },\r\n    endDate: {\r\n      type: DataTypes.DATEONLY,\r\n      allowNull: false\r\n    },\r\n    reason: {\r\n      type: DataTypes.TEXT,\r\n      allowNull: false\r\n    },\r\n    documents: {\r\n      type: DataTypes.ARRAY(DataTypes.STRING), \r\n      allowNull: true,\r\n      defaultValue: []\r\n    },\r\n    status: {\r\n      type: DataTypes.ENUM(...Object.values(LeaveStatus)),\r\n      defaultValue: LeaveStatus.PENDING,\r\n      allowNull: false\r\n    },\r\n    employeeId: {\r\n      type: DataTypes.INTEGER,\r\n      allowNull: false,\r\n      references: {\r\n        model: Employee,\r\n        key: 'id'\r\n      }\r\n    },\r\n    createdAt: {\r\n      type: DataTypes.DATE,\r\n      defaultValue: DataTypes.NOW\r\n    },\r\n    updatedAt: {\r\n      type: DataTypes.DATE,\r\n      defaultValue: DataTypes.NOW\r\n    }\r\n  },\r\n  {\r\n    sequelize,\r\n    modelName: 'Leave',\r\n    tableName: 'leaves',\r\n    indexes: [\r\n      {\r\n        fields: ['employeeId']\r\n      },\r\n      {\r\n        fields: ['status']\r\n      }\r\n    ]\r\n  }\r\n);\r\n\r\n\r\nLeave.belongsTo(Employee, {\r\n  foreignKey: 'employeeId',\r\n  as: 'employee'\r\n});\r\n\r\nEmployee.hasMany(Leave, {\r\n  foreignKey: 'employeeId',\r\n  as: 'leaves'\r\n});\r\n\r\nexport default Leave;"],"names":["Leave","Model","id","leaveType","duration","startDate","endDate","reason","documents","status","employeeId","createdAt","updatedAt","init","type","DataTypes","INTEGER","autoIncrement","primaryKey","ENUM","Object","values","LeaveType","allowNull","DECIMAL","DATEONLY","TEXT","ARRAY","STRING","defaultValue","LeaveStatus","PENDING","references","model","Employee","key","DATE","NOW","sequelize","modelName","tableName","indexes","fields","belongsTo","foreignKey","as","hasMany"],"mappings":";;;;+BAsGA;;;eAAA;;;2BAtG2C;8DACrB;sEACD;4BAC0B;;;;;;;;;;;;;;;;;;;AAK/C,IAAA,AAAMA,QAAN,MAAMA,cAAcC,gBAAK;;QAAzB,gBACE,uBAAOC,MAAP,KAAA,IACA,uBAAOC,aAAP,KAAA,IACA,uBAAOC,YAAP,KAAA,IACA,uBAAOC,aAAP,KAAA,IACA,uBAAOC,WAAP,KAAA,IACA,uBAAOC,UAAP,KAAA,IACA,uBAAOC,aAAP,KAAA,IACA,uBAAOC,UAAP,KAAA,IACA,uBAAOC,cAAP,KAAA,IACA,uBAAgBC,aAAhB,KAAA,IACA,uBAAgBC,aAAhB,KAAA;;AACF;AAEAZ,MAAMa,IAAI,CACR;IACEX,IAAI;QACFY,MAAMC,oBAAS,CAACC,OAAO;QACvBC,eAAe;QACfC,YAAY;IACd;IACAf,WAAW;QACTW,MAAMC,oBAAS,CAACI,IAAI,IAAIC,OAAOC,MAAM,CAACC,qBAAS;QAC/CC,WAAW;IACb;IACAnB,UAAU;QACRU,MAAMC,oBAAS,CAACS,OAAO,CAAC,GAAG;QAC3BD,WAAW;IACb;IACAlB,WAAW;QACTS,MAAMC,oBAAS,CAACU,QAAQ;QACxBF,WAAW;IACb;IACAjB,SAAS;QACPQ,MAAMC,oBAAS,CAACU,QAAQ;QACxBF,WAAW;IACb;IACAhB,QAAQ;QACNO,MAAMC,oBAAS,CAACW,IAAI;QACpBH,WAAW;IACb;IACAf,WAAW;QACTM,MAAMC,oBAAS,CAACY,KAAK,CAACZ,oBAAS,CAACa,MAAM;QACtCL,WAAW;QACXM,cAAc,EAAE;IAClB;IACApB,QAAQ;QACNK,MAAMC,oBAAS,CAACI,IAAI,IAAIC,OAAOC,MAAM,CAACS,uBAAW;QACjDD,cAAcC,uBAAW,CAACC,OAAO;QACjCR,WAAW;IACb;IACAb,YAAY;QACVI,MAAMC,oBAAS,CAACC,OAAO;QACvBO,WAAW;QACXS,YAAY;YACVC,OAAOC,sBAAQ;YACfC,KAAK;QACP;IACF;IACAxB,WAAW;QACTG,MAAMC,oBAAS,CAACqB,IAAI;QACpBP,cAAcd,oBAAS,CAACsB,GAAG;IAC7B;IACAzB,WAAW;QACTE,MAAMC,oBAAS,CAACqB,IAAI;QACpBP,cAAcd,oBAAS,CAACsB,GAAG;IAC7B;AACF,GACA;IACEC,WAAAA,cAAS;IACTC,WAAW;IACXC,WAAW;IACXC,SAAS;QACP;YACEC,QAAQ;gBAAC;aAAa;QACxB;QACA;YACEA,QAAQ;gBAAC;aAAS;QACpB;KACD;AACH;AAIF1C,MAAM2C,SAAS,CAACT,sBAAQ,EAAE;IACxBU,YAAY;IACZC,IAAI;AACN;AAEAX,sBAAQ,CAACY,OAAO,CAAC9C,OAAO;IACtB4C,YAAY;IACZC,IAAI;AACN;MAEA,WAAe7C"}